<%@page import="com.puyun.myshop.base.Constants"%><%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><%	String imgPath = Constants.DEFAULT_PRODUCTION_PATH;%><!DOCTYPE html><html><head>    <meta charset='utf-8'>    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    <meta name="viewport" content="initial-scale=1, user-scalable=no">    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />    <meta name="apple-mobile-web-app-capable" content="yes" />    <title></title>    <link rel="stylesheet" href="css/bootstrap.min.css"/>    <link rel="stylesheet" href="css/base.css"/>    <style>    	/*        img, canvas, iframe, video, svg { max-width: 100%; }        @media screen and (min-width: 240px){            .wrp_page {                max-width: 1000px;                min-width: 240px;                width:100%;                margin: 0px;                position: relative;            }            .wrp_page > img{            }            .wrp_img{            	width: 100%;            	height: auto;            	max-height: 340px;            	vertical-align:middle;            }            .page-content {                display: table-cell; vertical-align:middle;*display: block; *font-size: 175px;                 *font-family:Arial; max-width:1000px; max-height:340px;border: 1px solid #eee;                width: 100%;            }           #activity-detail .page-content {                margin-top: 0;            }         }        */    </style></head><body id="activity-detail" style="overflow: hidden;"><div class="wrp_page">    <div class="page-content">	      <div id="carousel-example-generic" class="carousel slide" >			  <!-- Indicators -->			  <ol id="dot-list" class="carousel-indicators" style="display: none;">			  </ol>						  <!-- Wrapper for slides -->			  <div id="production-list" class="carousel-inner" role="listbox" >			  </div>						  <!-- Controls -->			  <a class="left carousel-control"  href="#carousel-example-generic" role="button" data-slide="prev">			    <span class="glyphicon glyphicon-chevron-left"></span>			    <span class="sr-only">Previous</span>			  </a>			  <a class="right carousel-control"  href="#carousel-example-generic" role="button" data-slide="next">			    <span class="glyphicon glyphicon-chevron-right"></span>			    <span class="sr-only">Next</span>			  </a>		</div>		<br>		<div id="introduction" style="padding: 0px 10px 0px 10px; color: #8f8f8f; ">		</div>    </div></div></body><script src="js/vendor/jquery-1.10.1.min.js"></script><script src="js/vendor/jquery.touchwipe.min.js"></script><script src="js/vendor/collapse.js"></script><script src="js/vendor/bootstrap-carousel.js"></script><script src="js/base.js"></script><script>	var map = {};//key：产品ID		value：产品详情		function loadIntroduction(id)	{		$("#introduction").html(map[id]);	}		function initProduction()	{		$.ajax({			url:"/production/getProductionDetailList",			type:"post",			data:{				orgId:"${orgId}",				corpId:"${corpId}"			},		    dataType:'json',		    success : function(data){		    		if(data.success){		    			var result = data.result;		    			var html = "";		    			var dot = "";		    			if(result.length > 0)		    			{			    			for(var i = 0; i < result.length; i++){			    				var obj = result[i];			    				var active = i == 0 ? "active" : "";//选中样式			    				dot += '<li data-target="#carousel-example-generic" data-slide-to="'+ i +'" class="'+ active +'"></li>';			    								    			html += '<div class="wrp_img item '+ active +'" production-id="'+ obj.id +'">' +								    			'  <img src="<%=imgPath%>'+ obj.image +'" alt="'+ obj.name +'" onerror=javascript:this.src="/img/nopic.png">' +								    			'  <div class="carousel-caption">' +								    			'  </div>'+								    			'</div>';				    						    				map[obj.id] = obj.introduction;//缓存产品详情			    				if(i == 0){//第一条默认显示			    					$("#introduction").html(obj.introduction);			    				} 			    			}			    			$("#production-list").html(html);			    			$("#dot-list").html(dot);			    			$("#dot-list li:gt(0)").css({"margin-left":"10%","text-align":"center"});			    			//产品切换			    			$('.page-content').on('slid.bs.carousel', function () {			    				  var id = $("#production-list").find(".active").attr("production-id");			    				 loadIntroduction(id);		    				});			    			//禁止自动滚动			    			$('#carousel-example-generic').carousel({			    				pause: true,			    				interval: false		    				}); 			    			//点击图片查看下一个产品			    			$(".wrp_img").on("click", function (){			    				$("a[data-slide='next']").click();			    			});		    			}		    			else	    				{			    			$("#activity-detail").html("暂无产品信息！");			    			$("#activity-detail").css({"text-align":"center","margin-top":"10px"});	    				}					}		    }		});				$(".page-content").touchwipe({		     wipeLeft: function() { //向左滑动		    	 $("a[data-slide='next']").click();	    	 },		     wipeRight: function() { 		    	 $("a[data-slide='prev']").click();	    	 },		     wipeUp: function() {//向上滑动		    	 //$("a[data-slide='next']").click();			},		    wipeDown: function() {		    	//$("a[data-slide='prev']").click();		     },		     min_move_x: 20,		     min_move_y: 20,		     preventDefaultEvents: false		});	}		initProduction();		</script></html>